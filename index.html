<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Rajanya Global 25.">
  <title>Rajanya Ancestry</title>
  <script>
    // Dark mode initialization
    (function() {
      const darkMode = localStorage.getItem('darkMode');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      if (darkMode === 'enabled' || (darkMode === null && prefersDark)) {
        document.documentElement.classList.add('dark-mode');
      }
    })();
  </script>
  <script>if(!sessionStorage.getItem("_swa1")&&document.referrer.indexOf(location.protocol+"//"+location.host)!== 0){fetch("https://counter.dev/track?"+new URLSearchParams({referrer:"https://www.admixjs.com",screen:screen.width+"x"+screen.height,user:"TheCount",utcoffset:"1"}))};sessionStorage.setItem("_swa1","1");</script>
  <link rel="stylesheet" href="new.css">
  <script src="script.js"></script>
</head>
<body>
  <aside class="sidebar">
    <nav>
  <div class="nav-brand">
      <a href="https://pastebin.com/CKZsErWA" target="_blank">
  <img src="/images/Rajputana-flag.jpg" alt="Rajputana Flag" width="100" height="70">
</a>

<h3>
  <a href="https://pastebin.com/CKZsErWA" target="_blank">Rajanya Ancestry</a>
</h3>
 </div>
<div class="nav-links">
        <button class="tablink" id="defaulttab" onclick="openTab('data', this)">data</button>
        <button class="tablink inactive" onclick="openTab('source', this)">source</button>
        <button class="tablink inactive" onclick="openTab('target', this)">target</button>
        <button class="tablink inactive" onclick="openTab('distance', this);processInput()">distance</button>
        <button class="tablink inactive" onclick="openTab('single', this);processInput()">single</button>
        <button class="tablink inactive" onclick="openTab('multi', this);processInput()">multi</button>
      </div>
    </nav>
  </aside>

  <main>
    <div id="notification" onclick="clearNotification()"></div>

    <section class="tab" id="data">
      <div class="flexcontainer-data">
        <div class="panel leftpanel" id="xx">
          <div class="filteropt">
            <div class="div-100">
              <input spellcheck="false" class="buttons input-data" id="filter" value="" placeholder="Type to filter" oninput="dataFilter();">
              <button class="buttons filterReset" onclick="resetFilter()">Ã—</button>
            </div>
          </div>
          <div class="filteropt">
            <button class="buttons" onclick="toggleOptions('addRep', this)">add&nbsp;to:</button>
            <button class="buttons" onclick="copyTo('source', this)">source</button>
            <button class="buttons" onclick="copyTo('target', this)">target</button>
          </div>
          <textarea readonly spellcheck="false" class="" id="filteroutput" value="" placeholder="Press 'OPEN FILES' button and select one or multiple files to load CSV spreadsheets.&#10;Lines starting with a comma (headers) will be omitted.&#10;&#10;Press 'Shift' to focus the search field.&#10;Start typing to filter the list of samples.&#10;&#10;Search is case sensitive.&#10;&#10;'Space' - AND&#10;'!' - negation&#10;'?' - OR&#10;'abc def' - abc AND def&#10;'!abc' - NOT abc&#10;'abc !def' - abc AND NOT def&#10;'abc ? def' - abc OR def&#10;'abc def ? ghi' - (abc AND def) OR (ghi)&#10;'abc def ? abc ghi' - (abc AND def) OR (abc AND ghi)&#10;',abc' - starts with abc&#10;'abc,' - ends with abc&#10;'!,abc' - does NOT start with abc&#10;'!abc,' - does NOT end with abc&#10;'abc !def,' - abc AND does NOT end with def"></textarea>
        </div>
        <div class="panel rightpanel">
          <label for="localfiles" class="buttons button100">
            Open files<input type="file" name="Open files" multiple="" id="localfiles" onchange="processFiles(this)">
          </label>
          <div id="datalist"></div>
        </div>
      </div>
    </section>

    <textarea onchange="inputHasChanged = true" class="tab tabinput" id="source" spellcheck="false" placeholder=" Paste data here. Comma-separated values, no header."></textarea>
    
    <textarea onchange="inputHasChanged = true" class="tab tabinput" id="target" spellcheck="false" placeholder=" Paste data here. Comma-separated values, no header."></textarea>

    <section class="tab" id="distance">
      <div class="flexcontainer">
        <div class="panel leftpanel" id="distanceoutput"></div>
        <div class="panel rightpanel">
          <button class="buttons button100" onclick="clearOutput(this, 'confirm')">clear&nbsp;output</button>
          <div>
            <button class="buttons button20" onclick="clearOutput(this, 'distanceoutput')">ok</button>
            <button class="buttons button80" onclick="clearOutput(this, 'cancel')">cancel</button>
          </div>
          <button class="buttons button100" onclick="toggleOptions('distMode', this)">mode&nbsp;-&nbsp;single</button>
          <button class="buttons button80" onclick="this.nextElementSibling.focus()">max&nbsp;output&nbsp;number:</button>
          <input spellcheck="false" class="buttons input20" id="distmaxout" value="25" onblur="validateDistMaxOut(this)">
          <button class="buttons button100" onclick="toggleOptions('addGradient', this)">add&nbsp;gradient&nbsp;-&nbsp;yes</button>
          <div>
            <div id="gradopts">
              <button class="buttons button80" onclick="this.nextElementSibling.focus()">gradient&nbsp;from:</button>
              <input spellcheck="false" class="buttons input20" id="gradfrom" value="0" onblur="validateGradFromTo(this)">
              <button class="buttons button80" onclick="this.nextElementSibling.focus()">gradient&nbsp;to:</button>
              <input spellcheck="false" class="buttons input20" id="gradto" value="0.2" onblur="validateGradFromTo(this)">
            </div>
            <div id="gradoptsdiff">
              <button class="buttons button80" onclick="this.nextElementSibling.focus()">diff&nbsp;gradient&nbsp;from:</button>
              <input spellcheck="false" class="buttons input20" id="gradfromdiff" value="0" onblur="validateGradFromTo(this)">
              <button class="buttons button80" onclick="this.nextElementSibling.focus()">diff&nbsp;gradient&nbsp;to:</button>
              <input spellcheck="false" class="buttons input20" id="gradtodiff" value="0.2" onblur="validateGradFromTo(this)">
            </div>
          </div>
          <button id="runalldist" disabled class="buttons button100" onclick="runAllDist()">run&nbsp;all</button>
          <div id="distancetargets"></div>
        </div>
      </div>
    </section>

    <section class="tab" id="single">
      <div class="flexcontainer">
        <div class="panel leftpanel" id="singleoutput"></div>
        <div class="panel rightpanel">
          <button class="buttons button100" onclick="clearOutput(this, 'confirm')">clear&nbsp;output</button>
          <div>
            <button class="buttons button20" onclick="clearOutput(this, 'singleoutput')">ok</button>
            <button class="buttons button80" onclick="clearOutput(this, 'cancel')">cancel</button>
          </div>
          <button class="buttons button100" onclick="toggleOptions('cyclesX', this)">cycles&nbsp;-&nbsp;0.25x</button>
          <button class="buttons button100" onclick="toggleOptions('nPop', this)">reduce&nbsp;-&nbsp;no</button>
          <button class="buttons button100" onclick="toggleOptions('addDistCol', this)">add&nbsp;dist&nbsp;col&nbsp;-&nbsp;no</button>
          <button id="adcrecal" disabled class="buttons button100" onclick="toggleOptions('addDistColRecal', this)">recalculate&nbsp;-&nbsp;yes</button>
          <button class="buttons button100" onclick="toggleOptions('printZeroes', this)">print zeroes&nbsp;-&nbsp;no</button>
          <button class="buttons button100" onclick="toggleOptions('aggregate', this)">aggregate&nbsp;-&nbsp;yes</button>
          <button class="buttons button100" onclick="toggleOptions('addBarChart', this)">add&nbsp;bar&nbsp;chart&nbsp;-&nbsp;mode&nbsp;1</button>
          <button id="runallsingle" disabled class="buttons button100" onclick="runAllSingle()">run&nbsp;all</button>
          <div id="singletargets"></div>
        </div>
      </div>
    </section>

    <section class="tab" id="multi">
      <div class="flexcontainer-nr">
        <div>
          <button class="buttons buttonmulti" onclick="toggleOptions('cyclesXMulti', this)">cycles&nbsp;-&nbsp;0.25x</button>
          <button class="buttons buttonmulti" onclick="toggleOptions('fastModeMulti', this)">fast&nbsp;mode&nbsp;-&nbsp;no</button>
        </div>
        <div>
          <button class="buttons buttonmulti" onclick="toggleOptions('addDistColMulti', this)">add&nbsp;dist&nbsp;col&nbsp;-&nbsp;no</button>
          <button id="adcmrecal" disabled class="buttons buttonmulti" onclick="toggleOptions('addDistColMultiRecal', this)">recalculate&nbsp;-&nbsp;yes</button>
        </div>
        <div>
          <button class="buttons buttonmulti" onclick="toggleOptions('printZeroesMulti', this)">print&nbsp;zeroes&nbsp;-&nbsp;no</button>
          <button class="buttons buttonmulti" onclick="toggleOptions('aggregateMulti', this)">aggregate&nbsp;-&nbsp;yes</button>
        </div>
        <div>
          <button class="buttons buttonmulti" onclick="clearOutput(this, 'confirm', 'inline-block')">clear&nbsp;output</button>
          <div>
            <button class="buttons buttonmulti multiclearok" onclick="clearOutput(this, 'multioutput', 'inline-block')">ok</button>
            <button class="buttons buttonmulti multiclearcancel" onclick="clearOutput(this, 'cancel', 'inline-block')">cancel</button>
          </div>
          <button id="runmulti" disabled class="buttons buttonmulti" onclick="multiFMC()">run</button>
        </div>
      </div>
      <div id="multioutput"></div>
    </section>
  </main>

  <script>
    initialize();
    
    // Dark mode toggle function
    function toggleDarkMode() {
      const html = document.documentElement;
      const isDark = html.classList.toggle('dark-mode');
      localStorage.setItem('darkMode', isDark ? 'enabled' : 'disabled');
    }
  </script>
</body>
</html>